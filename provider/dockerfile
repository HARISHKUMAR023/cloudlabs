FROM ubuntu:22.04
RUN apt-get update && apt-get install -y wget curl git sudo software-properties-common \
    && apt-get clean
RUN curl -fsSL https://code-server.dev/install.sh | sh
RUN useradd -m coder && echo "coder:coder" | chpasswd && adduser coder sudo
WORKDIR /home/coder
EXPOSE 8080
CMD ["sh", "-c", "code-server --bind-addr 0.0.0.0:8080 --auth password --password $PASSWORD"]
